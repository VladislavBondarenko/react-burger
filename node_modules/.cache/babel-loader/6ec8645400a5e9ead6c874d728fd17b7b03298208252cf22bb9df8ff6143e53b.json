{"ast":null,"code":"import _objectSpread from\"/Users/vlad/Desktop/dev/react-burger/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/Users/vlad/Desktop/dev/react-burger/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/vlad/Desktop/dev/react-burger/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Button,ConstructorElement,CurrencyIcon,DragIcon}from\"@ya.praktikum/react-developer-burger-ui-components\";import{useMemo,useState}from\"react\";import{useGroupIngredients}from\"../../hooks/useFilteredIngredient\";import{sum}from\"../../utils/sum\";import{OrderDetails}from\"../OrderDetails/OrderDetails\";import style from\"./BurgerConstructor.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ingredientToConstructorElementProps=function ingredientToConstructorElementProps(ingredient){var _ingredient$price,_ingredient$image,_ingredient$name;return{price:(_ingredient$price=ingredient===null||ingredient===void 0?void 0:ingredient.price)!==null&&_ingredient$price!==void 0?_ingredient$price:0,thumbnail:(_ingredient$image=ingredient===null||ingredient===void 0?void 0:ingredient.image)!==null&&_ingredient$image!==void 0?_ingredient$image:void 0,text:(_ingredient$name=ingredient===null||ingredient===void 0?void 0:ingredient.name)!==null&&_ingredient$name!==void 0?_ingredient$name:\"\"};};export function BurgerConstructor(_ref){var selectedIngredients=_ref.selectedIngredients;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isOpened=_useState2[0],setIsOpened=_useState2[1];var totalPrice=useMemo(function(){return sum.apply(void 0,_toConsumableArray(selectedIngredients.map(function(ingredient){return ingredient.price;})));},[selectedIngredients]);var _useGroupIngredients=useGroupIngredients(selectedIngredients),_useGroupIngredients$=_slicedToArray(_useGroupIngredients.buns,1),burgerBun=_useGroupIngredients$[0],mains=_useGroupIngredients.mains,sauces=_useGroupIngredients.sauces;var middleIngredients=[].concat(_toConsumableArray(mains),_toConsumableArray(sauces));var topAndBottomProps=_objectSpread(_objectSpread({},ingredientToConstructorElementProps(burgerBun)),{},{isLocked:true});return/*#__PURE__*/_jsxs(\"section\",{className:\"\".concat(style.card,\" mt-25 \"),children:[/*#__PURE__*/_jsxs(\"ul\",{className:style.card__list,children:[/*#__PURE__*/_jsx(\"li\",{className:\"\".concat(style.card__list_item),children:/*#__PURE__*/_jsx(ConstructorElement,_objectSpread({type:\"top\"},topAndBottomProps))}),/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(style.card__list_ingredients),children:/*#__PURE__*/_jsx(\"ul\",{className:style.card__list,children:middleIngredients.map(function(ingredient){return/*#__PURE__*/_jsxs(\"li\",{className:style.card__list_item,children:[/*#__PURE__*/_jsx(DragIcon,{type:\"primary\"}),/*#__PURE__*/_jsx(ConstructorElement,_objectSpread({},ingredientToConstructorElementProps(ingredient)))]},ingredient._id);})})}),/*#__PURE__*/_jsx(\"li\",{className:\"\".concat(style.card__list_item),children:/*#__PURE__*/_jsx(ConstructorElement,_objectSpread({type:\"bottom\"},topAndBottomProps))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(style.card__container,\" mt-10\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(style.card__total_container,\" mr-10\"),children:[/*#__PURE__*/_jsx(\"p\",{className:\"text text_type_digits-medium mr-3\",children:totalPrice}),/*#__PURE__*/_jsx(CurrencyIcon,{type:\"primary\"})]}),/*#__PURE__*/_jsx(Button,{htmlType:\"button\",onClick:function onClick(){return setIsOpened(true);},type:\"primary\",size:\"large\",style:{marginRight:\"16px\"},children:\"\\u041E\\u0444\\u043E\\u0440\\u043C\\u0438\\u0442\\u044C \\u0437\\u0430\\u043A\\u0430\\u0437\"}),isOpened&&/*#__PURE__*/_jsx(OrderDetails,{onClose:function onClose(){return setIsOpened(false);}})]})]});}","map":{"version":3,"names":["Button","ConstructorElement","CurrencyIcon","DragIcon","useMemo","useState","useGroupIngredients","sum","OrderDetails","style","ingredientToConstructorElementProps","ingredient","price","thumbnail","image","text","name","BurgerConstructor","selectedIngredients","isOpened","setIsOpened","totalPrice","map","buns","burgerBun","mains","sauces","middleIngredients","topAndBottomProps","isLocked","card","card__list","card__list_item","card__list_ingredients","_id","card__container","card__total_container","marginRight"],"sources":["/Users/vlad/Desktop/dev/react-burger/src/components/BurgerConstructor/BurgerConstructor.jsx"],"sourcesContent":["import {\n  Button,\n  ConstructorElement,\n  CurrencyIcon,\n  DragIcon,\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport { useMemo, useState } from \"react\";\nimport { useGroupIngredients } from \"../../hooks/useFilteredIngredient\";\nimport { sum } from \"../../utils/sum\";\nimport { OrderDetails } from \"../OrderDetails/OrderDetails\";\nimport style from \"./BurgerConstructor.module.css\";\nimport { number, string } from \"prop-types\";\n\nconst ingredientToConstructorElementProps = (ingredient) => ({\n  price: ingredient?.price ?? 0,\n  thumbnail: ingredient?.image ?? void 0,\n  text: ingredient?.name ?? \"\",\n});\n\nexport function BurgerConstructor({ selectedIngredients }) {\n  const [isOpened, setIsOpened] = useState(false);\n  const totalPrice = useMemo(\n    () => sum(...selectedIngredients.map((ingredient) => ingredient.price)),\n    [selectedIngredients]\n  );\n  const {\n    buns: [burgerBun],\n    mains,\n    sauces,\n  } = useGroupIngredients(selectedIngredients);\n  const middleIngredients = [...mains, ...sauces];\n  const topAndBottomProps = {\n    ...ingredientToConstructorElementProps(burgerBun),\n    isLocked: true,\n  };\n\n  return (\n    <section className={`${style.card} mt-25 `}>\n      <ul className={style.card__list}>\n        <li className={`${style.card__list_item}`}>\n          <ConstructorElement type=\"top\" {...topAndBottomProps} />\n        </li>\n        <div className={`${style.card__list_ingredients}`}>\n          <ul className={style.card__list}>\n            {middleIngredients.map((ingredient) => (\n              <li key={ingredient._id} className={style.card__list_item}>\n                <DragIcon type=\"primary\" />\n                <ConstructorElement\n                  {...ingredientToConstructorElementProps(ingredient)}\n                />\n              </li>\n            ))}\n          </ul>\n        </div>\n        <li className={`${style.card__list_item}`}>\n          <ConstructorElement type=\"bottom\" {...topAndBottomProps} />\n        </li>\n      </ul>\n      <div className={`${style.card__container} mt-10`}>\n        <div className={`${style.card__total_container} mr-10`}>\n          <p className=\"text text_type_digits-medium mr-3\">{totalPrice}</p>\n          <CurrencyIcon type=\"primary\" />\n        </div>\n        <Button\n          htmlType=\"button\"\n          onClick={() => setIsOpened(true)}\n          type=\"primary\"\n          size=\"large\"\n          style={{ marginRight: \"16px\" }}\n        >\n          Оформить заказ\n        </Button>\n        {isOpened && <OrderDetails onClose={() => setIsOpened(false)} />}\n      </div>\n    </section>\n  );\n}\n\nBurgerConstructor.propTypes = {\n  price: number,\n  thumbnail: string,\n  text: string,\n  totalPrice: number,\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}